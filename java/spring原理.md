# spring原理

### springBean
生成bean流程
1. 找到class类
2. 实例化对象
3. 属性填充
4. 初始化
5. 对class进行aop（先判断需不需要，比如加了@Transaction），生成代理类，代理对象（这样一共有两个对象）
6. 生成bean（对应的是代理对象）

生成bean流程中，实例化对象调用的哪个构造方法？
答：如果没有显式构造方法，调用默认的无参构造方法。如果有一个显式构造方法，调用这个。如果有两个构造方法，一个有参，一个无参，调用无参的。如果有两个，两个都有参，则报错，spring
不知道调用哪个构造方法。如果两个都有参的构造方法，在其中一个上面加上注解@Autowired，则spring会调用这个

生成bean流程中，属性填充过程？   
答：先根据byType，再根据byName在容器中找到对应的bean。根据byType找到3个bean对象怎么办，再byName来找（其实byType到byName中间还有几层筛选，比如根据@Qualifier,@Primary ）。 根据不同bean的名字找到对应的bean，存储这些bean的是一个map，这个map叫单例池。
如果根据name找不到，会报错。如果根据类型只找到一个，即使名字不匹配也不报错，直接拿来用了。